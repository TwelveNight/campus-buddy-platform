/* 确保暗色模式下完全没有白色背景 */
[data-theme="dark"] html {
    background-color: #1a1a1a !important;
}

[data-theme="dark"] body {
    background-color: #1a1a1a !important;
    color: #ffffff !important;
}

[data-theme="dark"] #app {
    background-color: #1a1a1a !important;
    color: #ffffff !important;
}

[data-theme="dark"] .app-container {
    background-color: #1a1a1a !important;
}

[data-theme="dark"] .app-main {
    background-color: #1a1a1a !important;
}

/* 修复可能出现白色背景的组件 */
[data-theme="dark"] .el-main {
    background-color: #1a1a1a !important;
}

[data-theme="dark"] .main-content {
    background-color: #1a1a1a !important;
}

[data-theme="dark"] .page-container {
    background-color: #1a1a1a !important;
}

[data-theme="dark"] .content-wrapper {
    background-color: #1a1a1a !important;
}

/* 导航栏下拉菜单强化 */
[data-theme="dark"] .el-popper.is-pure {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-popper.is-pure .el-popper__arrow::before {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-menu--popup-container {
    background-color: #1a1a1a !important;
}

/* 进一步增强下拉菜单和弹出层的暗色模式支持 */
[data-theme="dark"] .el-popper {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
    color: #ffffff !important;
}

[data-theme="dark"] .el-dropdown__popper {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-select__popper {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-tooltip__popper {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
    color: #ffffff !important;
}

[data-theme="dark"] .el-autocomplete-suggestion {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-cascader__dropdown {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-color-picker__panel {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
}

[data-theme="dark"] .el-date-picker {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
    color: #ffffff !important;
}

[data-theme="dark"] .el-time-picker {
    background-color: #1a1a1a !important;
    border: 1px solid #333333 !important;
    color: #ffffff !important;
}

/* 默认亮色主题变量 */
:root {
    --primary-color: #409eff;
    --secondary-color: #3aa67c; /* 为渐变定义 */
    --primary-light: #ecf5ff;
    --primary-dark: #3a8ee6;
    --success-color: #67c23a;
    --warning-color: #e6a23c;
    --danger-color: #f56c6c;
    --info-color: #909399;

    --text-primary: #303133;
    --text-regular: #606266;
    --text-secondary: #909399;
    --text-placeholder: #c0c4cc;

    --border-color: #dcdfe6;
    --border-light: #e4e7ed;
    --border-lighter: #ebeef5;

    --background-color: #f5f7fa;
    --card-bg: #ffffff;
    --hover-bg: rgba(0, 0, 0, 0.05);

    --shadow-light: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
    --shadow-regular: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);
    --shadow-dark: 0 2px 8px rgba(0, 0, 0, 0.2);

    --transition-duration: 0.3s;
}

/* 暗色主题变量 */
[data-theme="dark"] {
    --primary-color: #409eff;
    --secondary-color: #2c3e50; /* 为渐变定义 */
    --primary-color-light: #60a9ff;
    --primary-light: #18222c;
    --primary-dark: #60a9ff;
    --primary-color-dark: #60a9ff;
    --primary-color-dark-hover: #79b8ff;
    --primary-color-dark-transparent: rgba(96, 169, 255, 0.2);
    --success-color: #67c23a;
    --success-color-dark: #85d75c;
    --warning-color: #e6a23c;
    --warning-color-dark: #ebb563;
    --danger-color: #f56c6c;
    --danger-color-dark: #f78989;
    --info-color: #909399;
    --info-color-dark: #a6a9ad;

    --text-primary: #e5eaf3;
    --text-regular: #cfd3dc;
    --text-secondary: #a3a6ad;
    --text-placeholder: #8d9095;

    --dark-text-primary: #e5eaf3;
    --dark-text-regular: #cfd3dc;
    --dark-text-secondary: #a3a6ad;
    --dark-text-placeholder: #8d9095;
    --dark-text-disabled: #6c6e72;
    --dark-text-on-primary: #ffffff;

    --border-color: #4c4d4f;
    --border-light: #363637;
    --border-lighter: #2e2e2f;

    --dark-border-color: #4c4d4f;
    --dark-border-light: #363637;
    --dark-border-lighter: #2e2e2f;

    --bg-color: #1e1e20;
    --bg-secondary: #2a2a2e;
    --background-color: #1e1e20;
    --card-bg: #252529;
    --hover-bg: rgba(255, 255, 255, 0.05);

    --dark-bg: #1e1e20;
    --dark-bg-secondary: #2a2a2e;
    --dark-card-bg: #252529;
    --dark-bg-hover: rgba(255, 255, 255, 0.05);
    --dark-input-bg: #2a2a2e;

    --dark-code-bg: #1a1a1c;
    --dark-code-text: #e5eaf3;

    --shadow-light: 0 2px 12px 0 rgba(0, 0, 0, 0.4);
    --shadow-regular: 0 2px 4px rgba(0, 0, 0, 0.3), 0 0 6px rgba(0, 0, 0, 0.2);
    --shadow-dark: 0 2px 8px rgba(0, 0, 0, 0.5);

    --dark-shadow-light: 0 2px 12px 0 rgba(0, 0, 0, 0.4);
    --dark-shadow-regular: 0 2px 4px rgba(0, 0, 0, 0.3), 0 0 6px rgba(0, 0, 0, 0.2);
    --dark-shadow-dark: 0 2px 8px rgba(0, 0, 0, 0.5);

    --transition-duration: 0.3s;
}

/* 暗色主题下的Element Plus组件样式覆盖 */
[data-theme="dark"] .el-card {
    --el-card-bg-color: var(--card-bg);
    --el-card-border-color: var(--border-color);
    color: var(--text-regular);
    box-shadow: var(--shadow-light);
}

[data-theme="dark"] .el-button--default {
    --el-button-bg-color: #2c2c30;
    --el-button-border-color: var(--border-color);
    --el-button-hover-bg-color: #3c3c42;
    --el-button-hover-border-color: var(--border-color);
    color: var(--text-regular);
}

[data-theme="dark"] .el-button--primary {
    --el-button-hover-bg-color: var(--primary-dark);
    --el-button-hover-text-color: #ffffff;
}

[data-theme="dark"] .el-input__wrapper {
    background-color: #2a2a2e;
    box-shadow: 0 0 0 1px var(--border-color) inset;
}

[data-theme="dark"] .el-input__inner {
    color: var(--text-regular);
}

[data-theme="dark"] .el-select .el-input {
    color: var(--text-regular);
}

[data-theme="dark"] .el-textarea__inner {
    background-color: #2a2a2e;
    border-color: var(--border-color);
    color: var(--text-regular);
}

[data-theme="dark"] .el-menu {
    --el-menu-bg-color: var(--card-bg);
    --el-menu-text-color: var(--text-regular);
    --el-menu-hover-bg-color: var(--hover-bg);
    --el-menu-border-color: var(--border-color);
}

[data-theme="dark"] .el-table {
    --el-table-bg-color: var(--card-bg);
    --el-table-tr-bg-color: var(--card-bg);
    --el-table-border-color: var(--border-color);
    --el-table-header-bg-color: #2a2a2e;
    --el-table-row-hover-bg-color: #2c2c32;
    --el-table-header-text-color: var(--text-regular);
    --el-table-text-color: var(--text-regular);
    color: var(--text-regular);
}

[data-theme="dark"] .el-table th.el-table__cell {
    background-color: #2a2a2e;
}

[data-theme="dark"] .el-table--border::after,
[data-theme="dark"] .el-table--border::before,
[data-theme="dark"] .el-table__inner-wrapper::before {
    background-color: var(--border-color);
}

[data-theme="dark"] .el-table--enable-row-hover .el-table__body tr:hover>td.el-table__cell {
    background-color: #2c2c32;
}

[data-theme="dark"] .el-pagination {
    --el-pagination-button-color: var(--text-regular);
    --el-pagination-button-bg-color: #2a2a2e;
    --el-pagination-button-disabled-color: #606266;
    --el-pagination-button-disabled-bg-color: #2a2a2e;
    --el-pagination-hover-color: var(--primary-color);
}

[data-theme="dark"] .el-tabs__item {
    color: var(--text-secondary);
}

[data-theme="dark"] .el-tabs__item.is-active {
    color: var(--primary-color);
}

[data-theme="dark"] .el-tabs__nav-wrap::after {
    background-color: var(--border-color);
}

[data-theme="dark"] .el-form-item__label {
    color: var(--text-regular);
}

[data-theme="dark"] .el-dialog {
    --el-dialog-bg-color: var(--card-bg);
    --el-dialog-border-color: var(--border-color);
}

[data-theme="dark"] .el-drawer {
    --el-drawer-bg-color: var(--card-bg);
}

/* 暗色主题下的更多Element Plus组件样式覆盖 */
[data-theme="dark"] .el-select-dropdown {
    --el-bg-color: #2a2a2e;
    --el-border-color: var(--border-color);
    background-color: #2a2a2e;
    border-color: var(--border-color);
}

[data-theme="dark"] .el-select-dropdown__item {
    color: var(--text-regular);
}

[data-theme="dark"] .el-select-dropdown__item:hover {
    background-color: var(--hover-bg);
}

[data-theme="dark"] .el-select-dropdown__item.selected {
    background-color: var(--primary-color);
    color: #ffffff;
}

[data-theme="dark"] .el-date-picker {
    --el-datepicker-bg-color: #2a2a2e;
    --el-datepicker-border-color: var(--border-color);
}

[data-theme="dark"] .el-picker-panel {
    background-color: #2a2a2e;
    border-color: var(--border-color);
}

[data-theme="dark"] .el-picker-panel__content {
    color: var(--text-regular);
}

[data-theme="dark"] .el-date-table td {
    color: var(--text-regular);
}

[data-theme="dark"] .el-date-table td.current:not(.disabled) {
    color: var(--primary-color);
}

[data-theme="dark"] .el-date-table td.today {
    color: var(--primary-color);
}

[data-theme="dark"] .el-message-box {
    --el-messagebox-bg-color: var(--card-bg);
    --el-messagebox-border-color: var(--border-color);
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

[data-theme="dark"] .el-message-box__title {
    color: var(--text-primary);
}

[data-theme="dark"] .el-message-box__message {
    color: var(--text-regular);
}

[data-theme="dark"] .el-notification {
    --el-notification-bg-color: var(--card-bg);
    --el-notification-border-color: var(--border-color);
    background-color: var(--card-bg);
    border-color: var(--border-color);
    box-shadow: var(--shadow-dark);
}

[data-theme="dark"] .el-notification__title {
    color: var(--text-primary);
}

[data-theme="dark"] .el-notification__content {
    color: var(--text-regular);
}

[data-theme="dark"] .el-popover.el-popper {
    --el-popover-bg-color: var(--card-bg);
    --el-popover-border-color: var(--border-color);
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

[data-theme="dark"] .el-tooltip__popper {
    --el-tooltip-bg-color: #2a2a2e;
    background-color: #2a2a2e;
    color: var(--text-regular);
}

[data-theme="dark"] .el-dropdown-menu {
    --el-dropdown-menu-bg-color: #2a2a2e;
    --el-dropdown-menuitem-hover-bg-color: var(--hover-bg);
    background-color: #2a2a2e;
    border-color: var(--border-color);
}

[data-theme="dark"] .el-dropdown-menu__item {
    color: var(--text-regular);
}

[data-theme="dark"] .el-dropdown-menu__item:hover {
    background-color: var(--hover-bg);
}

[data-theme="dark"] .el-upload {
    --el-upload-dragger-bg-color: #2a2a2e;
    --el-upload-dragger-border-color: var(--border-color);
}

[data-theme="dark"] .el-upload-dragger {
    background-color: #2a2a2e;
    border-color: var(--border-color);
}

[data-theme="dark"] .el-upload-dragger:hover {
    border-color: var(--primary-color);
}

[data-theme="dark"] .el-upload__tip {
    color: var(--text-secondary);
}

[data-theme="dark"] .el-progress-bar__outer {
    background-color: #2a2a2e;
}

[data-theme="dark"] .el-breadcrumb__item {
    color: var(--text-secondary);
}

[data-theme="dark"] .el-breadcrumb__item:last-child {
    color: var(--text-regular);
}

[data-theme="dark"] .el-tag {
    --el-tag-bg-color: #2a2a2e;
    --el-tag-border-color: var(--border-color);
    --el-tag-text-color: var(--text-regular);
    background-color: #2a2a2e;
    border-color: var(--border-color);
    color: var(--text-regular);
}

[data-theme="dark"] .el-tag--primary {
    --el-tag-bg-color: var(--primary-color);
    --el-tag-text-color: #ffffff;
}

[data-theme="dark"] .el-tag--success {
    --el-tag-bg-color: var(--success-color);
    --el-tag-text-color: #ffffff;
}

[data-theme="dark"] .el-tag--warning {
    --el-tag-bg-color: var(--warning-color);
    --el-tag-text-color: #ffffff;
}

[data-theme="dark"] .el-tag--danger {
    --el-tag-bg-color: var(--danger-color);
    --el-tag-text-color: #ffffff;
}

[data-theme="dark"] .el-loading-mask {
    background-color: rgba(0, 0, 0, 0.8);
}

[data-theme="dark"] .el-loading-spinner .el-loading-text {
    color: var(--text-regular);
}

[data-theme="dark"] .el-alert {
    --el-alert-bg-color: #2a2a2e;
    --el-alert-border-color: var(--border-color);
    background-color: #2a2a2e;
    border-color: var(--border-color);
}

[data-theme="dark"] .el-alert__title {
    color: var(--text-primary);
}

[data-theme="dark"] .el-alert__description {
    color: var(--text-regular);
}

[data-theme="dark"] .el-steps .el-step__head {
    border-color: var(--border-color);
}

[data-theme="dark"] .el-step__title {
    color: var(--text-regular);
}

[data-theme="dark"] .el-step__description {
    color: var(--text-secondary);
}

[data-theme="dark"] .el-radio__input.is-checked .el-radio__inner {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

[data-theme="dark"] .el-radio__label {
    color: var(--text-regular);
}

[data-theme="dark"] .el-checkbox__input.is-checked .el-checkbox__inner {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

[data-theme="dark"] .el-checkbox__label {
    color: var(--text-regular);
}

[data-theme="dark"] .el-switch.is-checked .el-switch__core {
    background-color: var(--primary-color);
}

[data-theme="dark"] .el-collapse {
    border-color: var(--border-color);
}

[data-theme="dark"] .el-collapse-item__header {
    background-color: var(--card-bg);
    color: var(--text-regular);
    border-bottom-color: var(--border-color);
}

[data-theme="dark"] .el-collapse-item__wrap {
    background-color: var(--card-bg);
    border-bottom-color: var(--border-color);
}

[data-theme="dark"] .el-collapse-item__content {
    color: var(--text-regular);
}

[data-theme="dark"] .el-timeline-item__timestamp {
    color: var(--text-secondary);
}

[data-theme="dark"] .el-timeline-item__content {
    color: var(--text-regular);
}

[data-theme="dark"] .el-backtop {
    background-color: var(--card-bg);
    color: var(--text-regular);
    box-shadow: var(--shadow-dark);
}

[data-theme="dark"] .el-backtop:hover {
    background-color: var(--hover-bg);
}

/* 页面背景和全局样式 */
[data-theme="dark"] {
    background-color: var(--background-color);
    color: var(--text-regular);
}

[data-theme="dark"] .page-container {
    background-color: var(--background-color);
    min-height: 100vh;
}

[data-theme="dark"] .content-wrapper {
    background-color: var(--background-color);
}

/* 自定义滚动条样式 */
[data-theme="dark"] ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

[data-theme="dark"] ::-webkit-scrollbar-track {
    background: #2a2a2e;
    border-radius: 4px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: #4a4a4e;
    border-radius: 4px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: #5a5a5e;
}

/* 代码块样式 */
[data-theme="dark"] pre,
[data-theme="dark"] code {
    background-color: #2a2a2e;
    color: var(--text-regular);
    border: 1px solid var(--border-color);
}

/* 链接样式 */
[data-theme="dark"] a {
    color: var(--primary-color);
}

[data-theme="dark"] a:hover {
    color: var(--primary-dark);
}

/* 过渡动画 */
body {
    transition: background-color var(--transition-duration), color var(--transition-duration);
}

[data-theme="dark"] body {
    background-color: var(--background-color);
    color: var(--text-regular);
}

/* 组件级过渡动画 */
* {
    transition: background-color var(--transition-duration),
        border-color var(--transition-duration),
        color var(--transition-duration);
}

/* 全局暗色背景，去除顶部/底部白色条 */
[data-theme="dark"] body,
[data-theme="dark"] html,
[data-theme="dark"] #app,
[data-theme="dark"] .main-layout,
[data-theme="dark"] .el-header,
[data-theme="dark"] .el-footer,
[data-theme="dark"] .el-main {
    background: #232326 !important;
    background-color: #232326 !important;
    color: var(--dark-text-primary);
}

[data-theme="dark"] .navbar,
[data-theme="dark"] .footer {
    background: #232326 !important;
    background-color: #232326 !important;
    color: var(--dark-text-primary);
    box-shadow: none !important;
}

/* NavBar 下拉菜单/弹出菜单暗色适配 */
[data-theme="dark"] .el-menu--popup,
[data-theme="dark"] .el-dropdown-menu {
    background: #232326 !important;
    background-color: #232326 !important;
    border: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.7) !important;
}

[data-theme="dark"] .el-menu--popup .el-menu-item,
[data-theme="dark"] .el-dropdown-menu__item {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-menu--popup .el-menu-item:hover,
[data-theme="dark"] .el-dropdown-menu__item:hover {
    background: #292933 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-menu--popup .el-menu-item.is-active,
[data-theme="dark"] .el-dropdown-menu__item.is-active {
    background: #232326 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-menu--horizontal>.el-menu-item,
[data-theme="dark"] .el-menu--horizontal>.el-sub-menu .el-sub-menu__title {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-menu--horizontal>.el-menu-item.is-active,
[data-theme="dark"] .el-menu--horizontal>.el-sub-menu.is-active .el-sub-menu__title {
    color: var(--primary-color-dark) !important;
}

/* RichEditor 深度暗色适配 */
[data-theme="dark"] .markdown-editor :deep(.md-editor),
[data-theme="dark"] .markdown-editor :deep(.md-editor-toolbar),
[data-theme="dark"] .markdown-editor :deep(.md-editor-input),
[data-theme="dark"] .markdown-editor :deep(.md-editor-preview) {
    background: #232326 !important;
    background-color: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-toolbar svg) {
    color: var(--dark-text-primary) !important;
    fill: var(--dark-text-primary) !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-toolbar .active svg) {
    color: var(--primary-color-dark) !important;
    fill: var(--primary-color-dark) !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-input::placeholder) {
    color: #888 !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-content .show-html-type) {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-preview) {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-preview pre),
[data-theme="dark"] .markdown-editor :deep(.md-editor-preview code) {
    background: #18181a !important;
    color: #e6e6e6 !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-preview table) {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .markdown-editor :deep(.md-editor-preview th),
[data-theme="dark"] .markdown-editor :deep(.md-editor-preview td) {
    border-color: #333 !important;
}

/* RichEditor md-editor 深度暗色适配 */
[data-theme="dark"] .rich-editor-dark.md-editor,
[data-theme="dark"] .rich-editor-dark .md-editor {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar {
    background: #232326 !important;
    border-bottom: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar-item {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar-item:hover {
    background: #292933 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar-item.active {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-input-wrapper {
    background: #232326 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-input {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-input::placeholder {
    color: #888 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview-wrapper {
    background: #232326 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview h1,
[data-theme="dark"] .rich-editor-dark .md-editor-preview h2,
[data-theme="dark"] .rich-editor-dark .md-editor-preview h3,
[data-theme="dark"] .rich-editor-dark .md-editor-preview h4,
[data-theme="dark"] .rich-editor-dark .md-editor-preview h5,
[data-theme="dark"] .rich-editor-dark .md-editor-preview h6 {
    color: var(--dark-text-primary) !important;
    border-bottom-color: #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview p {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview blockquote {
    background: #18181a !important;
    border-left: 4px solid var(--primary-color-dark) !important;
    color: var(--dark-text-secondary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview pre {
    background: #18181a !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview code {
    background: #18181a !important;
    color: #e6e6e6 !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview table {
    background: #232326 !important;
    border-color: #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview th,
[data-theme="dark"] .rich-editor-dark .md-editor-preview td {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview th {
    background: #18181a !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview a {
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview a:hover {
    color: var(--primary-color-dark-hover) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview ul,
[data-theme="dark"] .rich-editor-dark .md-editor-preview ol {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview li {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-preview hr {
    background-color: #333 !important;
    border-color: #333 !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-footer {
    background: #232326 !important;
    border-top: 1px solid #333 !important;
    color: var(--dark-text-secondary) !important;
}

/* md-editor 滚动条样式 */
[data-theme="dark"] .rich-editor-dark .md-editor-input::-webkit-scrollbar,
[data-theme="dark"] .rich-editor-dark .md-editor-preview::-webkit-scrollbar {
    width: 8px !important;
    background: #18181a !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-input::-webkit-scrollbar-thumb,
[data-theme="dark"] .rich-editor-dark .md-editor-preview::-webkit-scrollbar-thumb {
    background: #333 !important;
    border-radius: 4px !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-input::-webkit-scrollbar-thumb:hover,
[data-theme="dark"] .rich-editor-dark .md-editor-preview::-webkit-scrollbar-thumb:hover {
    background: #444 !important;
}

/* md-editor 工具栏按钮图标 */
[data-theme="dark"] .rich-editor-dark .md-editor-toolbar svg {
    color: var(--dark-text-primary) !important;
    fill: var(--dark-text-primary) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar .active svg {
    color: var(--primary-color-dark) !important;
    fill: var(--primary-color-dark) !important;
}

[data-theme="dark"] .rich-editor-dark .md-editor-toolbar-item:hover svg {
    color: var(--primary-color-dark) !important;
    fill: var(--primary-color-dark) !important;
}

/* md-editor 分割线 */
[data-theme="dark"] .rich-editor-dark .md-editor-split {
    background: #333 !important;
}

/* md-editor 全屏模式 */
[data-theme="dark"] .rich-editor-dark.md-editor-fullscreen {
    background: #232326 !important;
}

[data-theme="dark"] .rich-editor-dark.md-editor-fullscreen .md-editor-toolbar {
    background: #232326 !important;
    border-bottom: 1px solid #333 !important;
}

/* 评价卡片 ReviewList 深度暗色适配 */
[data-theme="dark"] .review-list-comp {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .review-item {
    background: #232326 !important;
    border: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2) !important;
}

[data-theme="dark"] .review-content-wrap {
    background: #18181a !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .review-content {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .review-footer {
    border-top: 1px solid #333 !important;
}

[data-theme="dark"] .el-tag {
    background: #232326 !important;
    color: var(--primary-color-dark) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-rate__icon {
    color: #f7ba2a !important;
}

[data-theme="dark"] .el-rate__text {
    color: #b0b3b8 !important;
}

/* 互助详细页面 HelpInfoDetail 深度暗色适配 */
[data-theme="dark"] .helpinfo-detail-page,
[data-theme="dark"] .el-card {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-descriptions,
[data-theme="dark"] .el-descriptions__title,
[data-theme="dark"] .el-descriptions-item__label,
[data-theme="dark"] .el-descriptions-item__content {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .description-section,
[data-theme="dark"] .images-section {
    background: #232326 !important;
    border: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .markdown-content {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-table {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-table th.el-table__cell,
[data-theme="dark"] .el-table td.el-table__cell {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-bottom: 1px solid #333 !important;
}

[data-theme="dark"] .el-button {
    background: #232326 !important;
    color: var(--primary-color-dark) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-button--primary {
    background: var(--primary-color-dark) !important;
    color: #fff !important;
    border-color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-button--danger {
    background: #e57373 !important;
    color: #fff !important;
    border-color: #e57373 !important;
}

/* 用户详细信息 UserProfile 深度暗色适配 */
[data-theme="dark"] .user-profile-card,
[data-theme="dark"] .user-details-section {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .user-profile-header {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-avatar {
    background: #18181a !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .el-progress__text {
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-tag {
    background: #232326 !important;
    color: var(--primary-color-dark) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-descriptions {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-descriptions__title {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-descriptions-item__label {
    background: #18181a !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-descriptions-item__content {
    border-color: #333 !important;
    color: var(--dark-text-primary) !important;
}

/* UserProfile 用户详细页面深度暗色适配 */
[data-theme="dark"] .user-profile-page {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .user-profile-card,
[data-theme="dark"] .user-review-card {
    background: #232326 !important;
    border: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2) !important;
}

[data-theme="dark"] .user-profile-card:hover,
[data-theme="dark"] .user-review-card:hover {
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .user-profile-header {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .user-profile-header h2 {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .user-basic-info .el-tag {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
    border-color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .user-credit .credit-label .credit-value {
    color: var(--primary-color-dark) !important;
    font-weight: bold !important;
}

[data-theme="dark"] .user-credit .credit-label .credit-title {
    color: var(--dark-text-secondary) !important;
}

[data-theme="dark"] .user-details-section,
[data-theme="dark"] .user-skills-section {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .user-details-section h3,
[data-theme="dark"] .user-skills-section h3 {
    color: var(--dark-text-primary) !important;
    border-bottom: 2px solid #333 !important;
}

[data-theme="dark"] .detail-item {
    background: transparent !important;
}

[data-theme="dark"] .detail-label {
    color: var(--dark-text-secondary) !important;
    font-weight: 500 !important;
}

[data-theme="dark"] .detail-value {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .skill-tags .skill-tag {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
    border: 1px solid var(--primary-color-dark) !important;
}

[data-theme="dark"] .skill-tags .skill-tag:hover {
    background: rgba(64, 158, 255, 0.3) !important;
    transform: scale(1.05) !important;
}

[data-theme="dark"] .card-header {
    color: var(--dark-text-primary) !important;
    border-bottom: 1px solid #333 !important;
}

[data-theme="dark"] .card-header h2 {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-divider {
    border-color: #333 !important;
}

/* UserProfile 中的 Progress 组件 */
[data-theme="dark"] .el-progress__text {
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-progress-circle__track {
    stroke: #333 !important;
}

[data-theme="dark"] .el-progress-circle__path {
    stroke: var(--primary-color-dark) !important;
}

/* UserProfile 中的 Avatar 组件 */
[data-theme="dark"] .el-avatar {
    background: #18181a !important;
    border: 2px solid #333 !important;
}

/* UserProfile 中的 Tag 组件 */
[data-theme="dark"] .el-tag--success {
    background: rgba(103, 194, 58, 0.2) !important;
    color: #85d75c !important;
    border-color: #85d75c !important;
}

[data-theme="dark"] .el-tag--info {
    background: rgba(144, 147, 153, 0.2) !important;
    color: #b0b3b8 !important;
    border-color: #b0b3b8 !important;
}

[data-theme="dark"] .el-tag--warning {
    background: rgba(230, 162, 60, 0.2) !important;
    color: #f0a020 !important;
    border-color: #f0a020 !important;
}

[data-theme="dark"] .el-tag--danger {
    background: rgba(245, 108, 108, 0.2) !important;
    color: #f78989 !important;
    border-color: #f78989 !important;
}

[data-theme="dark"] .el-tag--primary {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
    border-color: var(--primary-color-dark) !important;
}

/* 其它全局细节优化 */
[data-theme="dark"] .el-divider {
    border-color: #333 !important;
}

[data-theme="dark"] .el-empty__description {
    color: #b0b3b8 !important;
}

[data-theme="dark"] .el-pagination {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-input__inner,
[data-theme="dark"] .el-textarea__inner {
    background: #18181a !important;
    color: var(--dark-text-primary) !important;
    border-color: #333 !important;
}

[data-theme="dark"] .el-input__inner::placeholder,
[data-theme="dark"] .el-textarea__inner::placeholder {
    color: #888 !important;
}

/* NavBar 组件深度暗色适配 */
[data-theme="dark"] .navbar {
    background: linear-gradient(135deg, rgba(36,41,61,0.85), rgba(45,55,72,0.82));
    backdrop-filter: blur(18px);
    border-bottom: 1.5px solid rgba(76,77,79,0.18);
    box-shadow: 0 2px 16px 0 rgba(0,0,0,0.22), 0 1.5px 0 rgba(139,92,246,0.04) inset;
}

[data-theme="dark"] .navbar .logo h1 {
    background: linear-gradient(135deg, #8b5cf6, #2c65dd, #10b981);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    filter: drop-shadow(0 2px 8px #8b5cf6cc);
}

[data-theme="dark"] .navbar .logo img {
    filter: drop-shadow(0 2px 8px #8b5cf6cc) brightness(0.9);
}

[data-theme="dark"] .navbar .menu {
    background: transparent;
}

[data-theme="dark"] :deep(.el-menu--horizontal > .el-menu-item),
[data-theme="dark"] :deep(.el-menu--horizontal > .el-sub-menu__title) {
    color: #e5eaf3 !important;
    text-shadow: 0 1px 8px #23294655;
    transition: color 0.2s;
}

[data-theme="dark"] :deep(.el-menu--horizontal > .el-menu-item.is-active),
[data-theme="dark"] :deep(.el-menu--horizontal > .el-menu-item:hover),
[data-theme="dark"] :deep(.el-menu--horizontal > .el-sub-menu__title:hover) {
    color: #8b5cf6 !important;
    text-shadow: 0 2px 12px #8b5cf6cc;
}

[data-theme="dark"] .navbar .user-actions {
    background: linear-gradient(135deg, rgba(45,55,72,0.7), rgba(36,41,61,0.7));
    border-radius: 18px;
    box-shadow: 0 2px 12px rgba(139,92,246,0.08);
}

[data-theme="dark"] .navbar .user-avatar {
    box-shadow: 0 2px 8px #23294655;
    border: 2px solid #8b5cf6;
}

[data-theme="dark"] .navbar .user-name {
    color: #e5eaf3;
}

[data-theme="dark"] .navbar .login-btn,
[data-theme="dark"] .navbar .register-btn {
    background: linear-gradient(90deg, #8b5cf6 0%, #2c65dd 100%);
    color: #fff;
    box-shadow: 0 2px 8px #8b5cf655;
    border: none;
}

[data-theme="dark"] .navbar .login-btn:hover,
[data-theme="dark"] .navbar .register-btn:hover {
    background: linear-gradient(90deg, #2c65dd 0%, #10b981 100%);
    color: #fff;
    box-shadow: 0 4px 16px #10b98155;
}

/* 下拉菜单深度适配 */
[data-theme="dark"] .el-sub-menu .el-menu--popup {
    background: #232326 !important;
    border: 1px solid #333 !important;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.7) !important;
}

[data-theme="dark"] .el-sub-menu .el-menu--popup .el-menu-item {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-sub-menu .el-menu--popup .el-menu-item:hover {
    background: #292933 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-sub-menu .el-menu--popup .el-menu-item.is-active {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
}

/* 用户下拉菜单 */
[data-theme="dark"] .el-dropdown-menu {
    background: #232326 !important;
    border: 1px solid #333 !important;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.7) !important;
}

[data-theme="dark"] .el-dropdown-menu .el-dropdown-menu__item {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-dropdown-menu .el-dropdown-menu__item:hover {
    background: #292933 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-dropdown-menu .el-dropdown-menu__item.is-divided {
    border-top: 1px solid #333 !important;
}

/* 用户头像区域 */
[data-theme="dark"] .avatar-wrapper {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .avatar-wrapper:hover {
    background: rgba(64, 158, 255, 0.1) !important;
    border-radius: 8px !important;
}

[data-theme="dark"] .user-name {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .dropdown-icon {
    color: var(--dark-text-secondary) !important;
}

[data-theme="dark"] .bell-icon {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .bell-icon:hover {
    color: var(--primary-color-dark) !important;
}

/* 登录注册按钮 */
[data-theme="dark"] .login-btn {
    background: var(--primary-color-dark) !important;
    border-color: var(--primary-color-dark) !important;
    color: #fff !important;
}

[data-theme="dark"] .login-btn:hover {
    background: var(--primary-color-dark-hover) !important;
    border-color: var(--primary-color-dark-hover) !important;
}

[data-theme="dark"] .register-btn {
    background: transparent !important;
    border: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .register-btn:hover {
    background: #292933 !important;
    border-color: var(--primary-color-dark) !important;
    color: var(--primary-color-dark) !important;
}

/* 其他组件的额外深度适配 */
[data-theme="dark"] .el-loading-mask {
    background-color: rgba(35, 35, 38, 0.8) !important;
}

[data-theme="dark"] .el-loading-spinner .el-loading-text {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-overlay {
    background-color: rgba(0, 0, 0, 0.7) !important;
}

[data-theme="dark"] .el-drawer {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-drawer__header {
    border-bottom: 1px solid #333 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-drawer__body {
    background: #232326 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-form-item__label {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-form-item__error {
    color: #e57373 !important;
}

[data-theme="dark"] .el-select .el-input__inner {
    background: #18181a !important;
    border-color: #333 !important;
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-select-dropdown {
    background: #232326 !important;
    border: 1px solid #333 !important;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.7) !important;
}

[data-theme="dark"] .el-select-dropdown__item {
    color: var(--dark-text-primary) !important;
}

[data-theme="dark"] .el-select-dropdown__item:hover {
    background: #292933 !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-select-dropdown__item.selected {
    background: rgba(64, 158, 255, 0.2) !important;
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-tabs__nav-wrap::after {
    background-color: #333 !important;
}

[data-theme="dark"] .el-tabs__active-bar {
    background-color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-tabs__item {
    color: var(--dark-text-secondary) !important;
}

[data-theme="dark"] .el-tabs__item.is-active {
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-tabs__item:hover {
    color: var(--primary-color-dark) !important;
}

[data-theme="dark"] .el-tabs__content {
    background: transparent !important;
    color: var(--dark-text-primary) !important;
}

/* 骨架屏适配 */
[data-theme="dark"] .el-skeleton__item {
    background: linear-gradient(90deg, #18181a 25%, #232326 50%, #18181a 75%) !important;
}

[data-theme="dark"] .el-skeleton.is-animated .el-skeleton__item {
    background: linear-gradient(90deg, #18181a 25%, #292933 50%, #18181a 75%) !important;
}

/* 平台特色、核心功能、NavBar等区域的暗色毛玻璃和渐变卡片视觉 */
[data-theme="dark"] .feature-card,
[data-theme="dark"] .module-card {
    background: linear-gradient(135deg, rgba(36,41,61,0.85), rgba(45,55,72,0.82));
    backdrop-filter: blur(16px);
    border: 1.5px solid rgba(255,255,255,0.07);
    box-shadow: 0 8px 32px 0 rgba(0,0,0,0.28), 0 1.5px 0 rgba(139,92,246,0.08) inset;
    color: #e5eaf3 !important;
}

[data-theme="dark"] .feature-card h3,
[data-theme="dark"] .module-card h3 {
    color: #fff !important;
}

[data-theme="dark"] .feature-card p,
[data-theme="dark"] .module-card p {
    color: #cbd5e1 !important;
}

[data-theme="dark"] .feature-icon,
[data-theme="dark"] .module-icon {
    background: linear-gradient(135deg, rgba(59,130,246,0.18), rgba(139,92,246,0.10));
    box-shadow: 0 4px 16px rgba(139,92,246,0.12);
}

[data-theme="dark"] .feature-icon.accent,
[data-theme="dark"] .module-icon.accent {
    background: linear-gradient(135deg, rgba(239,68,68,0.18), rgba(239,68,68,0.10));
    box-shadow: 0 4px 16px rgba(239,68,68,0.12);
}

[data-theme="dark"] .feature-icon.secondary,
[data-theme="dark"] .module-icon.secondary {
    background: linear-gradient(135deg, rgba(16,185,129,0.18), rgba(16,185,129,0.10));
    box-shadow: 0 4px 16px rgba(16,185,129,0.12);
}

[data-theme="dark"] .feature-icon.tertiary {
    background: linear-gradient(135deg, rgba(139,92,246,0.18), rgba(139,92,246,0.10));
    box-shadow: 0 4px 16px rgba(139,92,246,0.12);
}

[data-theme="dark"] .feature-icon.quaternary {
    background: linear-gradient(135deg, rgba(245,158,11,0.18), rgba(245,158,11,0.10));
    box-shadow: 0 4px 16px rgba(245,158,11,0.12);
}